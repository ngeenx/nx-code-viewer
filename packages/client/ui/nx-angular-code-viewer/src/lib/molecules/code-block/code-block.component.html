<div class="code-block-wrapper">
  @if (showCopyButton()) {
    <nx-copy-button
      class="copy-button"
      [state]="copyState()"
      [theme]="theme()"
      (copyClick)="onCopyClick()" />
  }

  <div
    class="code-block-container"
    [ngStyle]="containerStyle()"
    (mouseleave)="onLineHover(0)">
    @if (showLineNumbers()) {
      <nx-line-numbers
        [lineCount]="lineCount()"
        [theme]="theme()"
        [hoveredLine]="hoveredLine()"
        [highlightedLinesSet]="highlightedLinesSet()"
        [collapsedRangesState]="collapsedRangesState()"
        (lineHover)="onLineHover($event)"
        (collapsedRangeToggle)="onCollapsedRangeToggle($event)" />
    }

    <nx-code-content
      [content]="content()"
      [rawCode]="rawCode()"
      [theme]="theme()"
      [wordWrap]="wordWrap()"
      [isLoading]="isLoading()"
      [hoveredLine]="hoveredLine()"
      [highlightedLinesSet]="highlightedLinesSet()"
      [focusedLinesSet]="focusedLinesSet()"
      [collapsedRangesState]="collapsedRangesState()"
      [processedReferences]="processedReferences()"
      [lineWidgets]="lineWidgets()"
      [activeInsertWidget]="activeInsertWidget()"
      (lineHover)="onLineHover($event)"
      (referenceClick)="onReferenceClick($event)"
      (referenceHover)="onReferenceHover($event)"
      (collapsedRangeToggle)="onCollapsedRangeToggle($event)"
      (lineWidgetClick)="onLineWidgetClick($event)"
      (insertWidgetClose)="onInsertWidgetClose()" />
  </div>
</div>
