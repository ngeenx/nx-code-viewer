<div
  class="diff-block-container"
  [class]="theme()"
  [ngStyle]="containerStyle()"
  (mouseleave)="onMouseLeave()"
>
  @if (isUnifiedView()) {
    <!-- Unified View -->
    @for (hunk of unifiedViewData(); track hunk.header) {
      <div class="hunk">
        <div class="hunk-header">{{ hunk.header }}</div>
        @for (item of hunk.lines; track item.globalIndex) {
          <ngn-diff-line
            [line]="item.line"
            [theme]="theme()"
            [showLineNumbers]="showLineNumbers()"
            [showPrefix]="true"
            [lineIndex]="item.globalIndex"
            [isHighlighted]="hoveredLineIndex() === item.globalIndex"
            (lineHover)="onLineHover($event)"
          />
        }
      </div>
    }
  } @else {
    <!-- Split View -->
    @for (hunk of splitViewHunks(); track $index) {
      <div class="hunk">
        <div class="hunk-header">{{ hunk.header }}</div>
        <div class="split-container">
          <div class="split-pane left">
            @for (pair of hunk.lines; track pair.globalIndex) {
              @if (pair.left) {
                <ngn-diff-line
                  [line]="pair.left"
                  [theme]="theme()"
                  [showLineNumbers]="showLineNumbers()"
                  [showPrefix]="false"
                  [lineIndex]="pair.globalIndex"
                  [isHighlighted]="hoveredLineIndex() === pair.globalIndex"
                  (lineHover)="onLineHover($event)"
                />
              } @else {
                <div class="empty-line"></div>
              }
            }
          </div>
          <div class="split-pane right">
            @for (pair of hunk.lines; track pair.globalIndex) {
              @if (pair.right) {
                <ngn-diff-line
                  [line]="pair.right"
                  [theme]="theme()"
                  [showLineNumbers]="showLineNumbers()"
                  [showPrefix]="false"
                  [lineIndex]="pair.globalIndex"
                  [isHighlighted]="hoveredLineIndex() === pair.globalIndex"
                  (lineHover)="onLineHover($event)"
                />
              } @else {
                <div class="empty-line"></div>
              }
            }
          </div>
        </div>
      </div>
    }
  }
</div>
