<div
  class="demo-container"
  [class.dark]="theme() === 'dark'"
  [class.light]="theme() === 'light'">
  <header class="demo-header">
    <h1>Code Viewer Demo</h1>
    <button class="theme-toggle" (click)="toggleTheme()">
      {{ theme() === 'dark' ? '‚òÄÔ∏è Light' : 'üåô Dark' }}
    </button>
  </header>

  <main class="demo-content">
    @for (example of examples; track example.title) {
      <section class="example-section">
        <nx-code-viewer
          [code]="example.code"
          [language]="example.language"
          [theme]="theme()"
          [title]="example.title"
          [fileExtension]="example.fileExtension ?? ''"
          [showLineNumbers]="true"
          [showCopyButton]="true"
          [showHeader]="true"
          (codeCopied)="onCodeCopied(example.title)" />
      </section>
    }

    <section class="example-section">
      <h2>Without Header</h2>
      <nx-code-viewer
        [code]="'const simple = true;'"
        language="typescript"
        [theme]="theme()"
        [showHeader]="false"
        [showLineNumbers]="true" />
    </section>

    <section class="example-section">
      <h2>Without Line Numbers</h2>
      <nx-code-viewer
        code="echo 'Hello, World!'"
        language="bash"
        [theme]="theme()"
        title="Bash"
        [showLineNumbers]="false"
        [showCopyButton]="true" />
    </section>

    <section class="example-section">
      <h2>With Max Height (Scrollable)</h2>
      <nx-code-viewer
        [code]="longCodeExample.code"
        [language]="longCodeExample.language"
        [theme]="theme()"
        [title]="longCodeExample.title"
        [fileExtension]="longCodeExample.fileExtension ?? ''"
        [showLineNumbers]="true"
        maxHeight="300px" />
    </section>

    <section class="example-section">
      <h2>With Word Wrap</h2>
      <nx-code-viewer
        [code]="[
          'This is a very long line of text that should wrap when word wrap is enabled. It contains multiple sentences to demonstrate the wrapping behavior of the code viewer component.',
          'This is another line to show how the wrapping works with multiple lines of content. This is another line to show how the wrapping works with multiple lines of content.',
        ]"
        language="plaintext"
        [theme]="theme()"
        title="Word Wrap Demo"
        [wordWrap]="true" />
    </section>

    <section class="example-section">
      <h2>With Highlighted Lines</h2>
      <p class="example-description">
        Lines 3, 7-9, and 12 are pre-configured to be highlighted
      </p>
      <nx-code-viewer
        [code]="highlightedLinesExample.code"
        [language]="highlightedLinesExample.language"
        [theme]="theme()"
        title="Highlighted Lines Demo"
        fileExtension=".ts"
        [highlightedLines]="highlightedLinesExample.highlightedLines" />
    </section>

    <section class="example-section">
      <h2>With Focused Lines</h2>
      <p class="example-description">
        Lines 3-6 and 12 are focused. All other lines are blurred.
      </p>
      <nx-code-viewer
        [code]="focusedLinesExample.code"
        [language]="focusedLinesExample.language"
        [theme]="theme()"
        title="Focused Lines Demo"
        fileExtension=".ts"
        [focusedLines]="focusedLinesExample.focusedLines" />
    </section>

    <section class="example-section">
      <h2>With Focused and Highlighted Lines</h2>
      <p class="example-description">
        Lines 3-13 are focused (rest blurred). Lines 4, 5, and 11 are
        highlighted within the focused area.
      </p>
      <nx-code-viewer
        [code]="focusedAndHighlightedExample.code"
        [language]="focusedAndHighlightedExample.language"
        [theme]="theme()"
        title="Combined Demo"
        fileExtension=".ts"
        [focusedLines]="focusedAndHighlightedExample.focusedLines"
        [highlightedLines]="focusedAndHighlightedExample.highlightedLines" />
    </section>

    <section class="example-section">
      <h2>With Collapsed Lines</h2>
      <p class="example-description">
        Lines 4-8 and 15-20 are collapsed. Click the expand icon (‚ñ∂) in the
        line number column or the "... N lines" indicator to expand.
      </p>
      <nx-code-viewer
        [code]="collapsedLinesExample.code"
        [language]="collapsedLinesExample.language"
        [theme]="theme()"
        title="Collapsed Lines Demo"
        fileExtension=".ts"
        [collapsedLines]="collapsedLinesExample.collapsedLines" />
    </section>

    <section class="example-section">
      <h2>Collapsed Lines with Highlights</h2>
      <p class="example-description">
        Lines 4-8 are collapsed. Lines 10, 11, 22, and 23 are highlighted.
        Collapsed lines can be combined with other line features.
      </p>
      <nx-code-viewer
        [code]="collapsedWithHighlightsExample.code"
        [language]="collapsedWithHighlightsExample.language"
        [theme]="theme()"
        title="Collapsed with Highlights"
        fileExtension=".ts"
        [collapsedLines]="collapsedWithHighlightsExample.collapsedLines"
        [highlightedLines]="collapsedWithHighlightsExample.highlightedLines" />
    </section>

    <section class="example-section">
      <h2>Reference Links</h2>
      <p class="example-description">
        Interactive references in code: hover over highlighted text to see info
        popovers, or click links to navigate to documentation. Try hovering over
        &#64;angular imports, &#64;Component decorator, or the TODO comment
        (which uses a custom Angular component for rich content).
      </p>
      <nx-code-viewer
        [code]="referenceLinksExample.code"
        [language]="referenceLinksExample.language"
        [theme]="theme()"
        title="reference-links.ts"
        fileExtension=".ts"
        [references]="referenceLinksExample.references" />
    </section>

    <section class="example-section">
      <h2>Line Widgets</h2>
      <p class="example-description">
        Hover over any line to see custom widgets. Left side shows a bookmark
        button, right side shows a comment button. Click the comment button to
        open a comment form below the line.
      </p>
      <nx-code-viewer
        [code]="lineWidgetsExample.code"
        [language]="lineWidgetsExample.language"
        [theme]="theme()"
        title="line-widgets-demo.ts"
        fileExtension=".ts"
        [lineWidgets]="lineWidgetsExample.lineWidgets"
        (lineWidgetClick)="onLineWidgetClick($event)" />
    </section>

    <section class="example-section">
      <h2>Border Styles</h2>
      <p class="example-description">
        Different border style variants: classic, grid-cross,
        corner-intersection, and none
      </p>
      @for (borderStyle of borderStyles; track borderStyle) {
        <div class="border-style-example">
          <h3>{{ borderStyle }}</h3>
          <nx-code-viewer
            [code]="borderStyleExample.code"
            [language]="borderStyleExample.language"
            [theme]="theme()"
            [borderStyle]="borderStyle"
            [showHeader]="false"
            [showLineNumbers]="false" />
        </div>
      }
    </section>

    <section class="example-section">
      <h2>Diff Viewer</h2>
      <div class="diff-controls">
        <button class="view-mode-toggle" (click)="toggleDiffViewMode()">
          {{
            diffViewMode() === 'unified'
              ? 'Switch to Split View'
              : 'Switch to Unified View'
          }}
        </button>
      </div>
      @for (diffExample of diffExamples; track diffExample.title) {
        <div class="diff-example">
          <h3>{{ diffExample.title }}</h3>
          <nx-diff-viewer
            [oldCode]="diffExample.oldCode"
            [newCode]="diffExample.newCode"
            [theme]="theme()"
            [viewMode]="diffViewMode()"
            [showLineNumbers]="diffExample.showLineNumbers"
            [showHeader]="true"
            [language]="diffExample.language"
            [fileExtension]="diffExample.fileExtension"
            [oldFileName]="diffExample.oldFileName"
            [newFileName]="diffExample.newFileName" />
        </div>
      }
    </section>

    <section class="example-section">
      <h2>Diff Viewer with Collapsed Lines</h2>
      <p class="example-description">
        Lines 2-5 and 10-13 (0-based global indices) are collapsed. Click to
        expand and see the hidden diff lines.
      </p>
      <div class="diff-controls">
        <button class="view-mode-toggle" (click)="toggleDiffViewMode()">
          {{
            diffViewMode() === 'unified'
              ? 'Switch to Split View'
              : 'Switch to Unified View'
          }}
        </button>
      </div>
      <nx-diff-viewer
        [oldCode]="diffCollapsedLinesExample.oldCode"
        [newCode]="diffCollapsedLinesExample.newCode"
        [theme]="theme()"
        [viewMode]="diffViewMode()"
        [showLineNumbers]="true"
        [showHeader]="true"
        [language]="diffCollapsedLinesExample.language"
        [collapsedLines]="diffCollapsedLinesExample.collapsedLines"
        fileExtension=".ts"
        oldFileName="user.component.ts"
        newFileName="user.component.ts" />
    </section>

    <section class="example-section">
      <h2>Diff Viewer Border Styles</h2>
      <p class="example-description">
        Different border style variants for diff viewer
      </p>
      @for (borderStyle of borderStyles; track borderStyle) {
        <div class="border-style-example">
          <h3>{{ borderStyle }}</h3>
          <nx-diff-viewer
            [oldCode]="diffExamples[0].oldCode"
            [newCode]="diffExamples[0].newCode"
            [theme]="theme()"
            [viewMode]="'unified'"
            [showLineNumbers]="true"
            [showHeader]="false"
            [language]="diffExamples[0].language"
            [borderStyle]="borderStyle" />
        </div>
      }
    </section>

    <section class="example-section">
      <h2>Multi-Code Viewer</h2>
      <p class="example-description">
        Tabbed interface for viewing multiple files including code and diff
        views. Click tabs to switch between files.
      </p>
      <nx-multi-code-viewer
        [tabs]="multiCodeViewerTabs"
        [theme]="theme()"
        borderStyle="classic" />
    </section>

    <section class="example-section">
      <h2>Multi-Code Viewer (Corner-Intersection Border)</h2>
      <nx-multi-code-viewer
        [tabs]="multiCodeViewerTabs"
        [theme]="theme()"
        borderStyle="corner-intersection" />
    </section>
  </main>
</div>
